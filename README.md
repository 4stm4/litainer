# Litainer

Litainer — инструмент для автоматизированной сборки минимального контейнера Linux с поддержкой ARM64 (например, для Raspberry Pi), включая скачивание и сборку ядра, настройку rootfs, установку базовых пакетов и тестирование работоспособности.

## Основные этапы работы

1. **Скачивание и сборка ядра Linux**
2. **Создание структуры rootfs**
3. **Копирование системных библиотек**
4. **Настройка сети**
5. **Установка базовых пакетов (bash, coreutils, curl, vim и др.)**
6. **Копирование бинарников и их зависимостей**
7. **Тестирование контейнера через chroot**

## Требования
- Linux (x86_64 или ARM64)
- Python 3.8+
- sudo
- Установленные утилиты: `apt-get`, `ar`, `wget`, `git`, `ldd`

## Установка зависимостей для сборки ядра

```bash
sudo apt-get update
sudo apt-get install -y build-essential libncurses-dev bison flex libssl-dev bc git gpgv2
```

## Как собрать контейнер

1. Клонируйте репозиторий и перейдите в папку проекта:
   ```bash
   git clone <repo_url>
   cd litainer
   ```
2. Запустите основной скрипт:
   ```bash
   python3 src/main.py
   ```
   Скрипт создаст папки `container/` (rootfs) и `temp/` (временные файлы).

## Как протестировать контейнер

После сборки выполните:
```bash
python3 src/tests/test_chroot.py
```
или
```bash
sudo python3 src/tests/test_chroot.py
```

Если всё успешно, вы увидите:
```
Тест chroot: УСПЕХ — контейнер рабочий!
```

## Структура проекта
- `src/main.py` — основной управляющий скрипт
- `src/adapters/` — адаптеры для работы с файловой системой, сетью, логированием, пакетами, ядром
- `src/core/` — логика настройки контейнера и интерфейсы
- `src/tests/` — тесты (например, тест chroot)

## Примечания
- Для ARM64/ARM контейнеров сборка ядра и копирование библиотек должны выполняться на соответствующей архитектуре или с использованием эмуляции.
- Для расширения списка пакетов отредактируйте переменную `packages` в `main.py`.
- Для успешного chroot в контейнере должны быть все необходимые библиотеки и бинарники.

---

**Вопросы и предложения:**
Пишите в issues или открывайте pull request! 